# Data & Image Specification â€” Life Mapped

**Date:** 2025-12-19
**Project:** Life Mapped (se122-image-sharing-social-media)

---

## 1. Memory Pin Data Model (JSON)

Each "Memory" is anchored to a geographic point and contains media and metadata.

```json
{
  "id": "uuid-v4",
  "userId": "uuid-v4",
  "timestamp": "ISO-8601",
  "location": {
    "lat": 45.523062,
    "lng": -122.676482,
    "accuracy": 10,
    "placeName": "Stumptown Coffee Roasters",
    "city": "Portland",
    "country": "USA"
  },
  "media": {
    "photo": {
      "url": "https://storage.lifemapped.com/photos/abc.jpg",
      "thumbnailUrl": "https://storage.lifemapped.com/thumbs/abc.jpg",
      "width": 4032,
      "height": 3024,
      "exif": {
        "make": "Apple",
        "model": "iPhone 13",
        "exposure": "1/60",
        "iso": 100
      }
    },
    "voiceSticker": {
      "url": "https://storage.lifemapped.com/audio/abc.m4a",
      "duration": 3.5,
      "format": "aac/m4a"
    }
  },
  "content": {
    "textNote": "The smell of rain and roasted beans.",
    "tags": ["nostalgia", "morning", "travel"],
    "feeling": "peaceful"
  },
  "privacy": {
    "level": "private",
    "sharedWith": []
  },
  "unlockCondition": {
    "type": "none",
    "value": null
  }
}
```

---

## 2. Media Specifications

### 2.1 Voice Stickers (Audio)

- **Format:** AAC (m4a) or Opus (webm) for web compatibility.
- **Duration:** Minimum 1s, Maximum 5s.
- **Bitrate:** 64kbps (optimized for voice clarity and fast loading).
- **Processing:** Normalize volume levels to ensure consistent playback during "Teleport" sequences.

### 2.2 Photos

- **Formats:** JPEG, HEIC (convert to JPEG/WebP on upload), WebP.
- **Resolution:**
  - Original: Up to 4K.
  - Display: 1080p (WebP).
  - Thumbnail: 300x300 (WebP).
- **Metadata:** Preserve EXIF `DateTimeOriginal`, `GPSLatitude`, and `GPSLongitude`. Strip PII (e.g., owner name) if shared publicly.

### 2.3 Generative Placeholders

- **Description:** Used when a pin has a Voice Sticker but no photo.
- **Style:** Abstract, blurred gradients or generative patterns based on the "Feeling" tag and the time of day (e.g., warm oranges for sunset, deep blues for night).

---

## 3. Storage & API Requirements

### 3.1 Storage Strategy

- **Cloud Storage:** S3-compatible bucket with CDN (CloudFront/Cloudflare) for low-latency media delivery.
- **Database:** PostgreSQL with PostGIS extension for efficient geographic queries (e.g., "Find all pins within 5km of current map center").

### 3.2 API Endpoints (High Level)

- `POST /api/memories/upload`: Handles multi-part upload (Photo + Audio + Metadata).
- `GET /api/memories/map?lat1=&lng1=&lat2=&lng2=`: Returns pins within a bounding box.
- `GET /api/memories/teleport`: Returns a single random memory ID.
- `POST /api/memories/bulk-import`: Processes a batch of metadata for validation before media upload.
